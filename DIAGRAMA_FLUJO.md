# ğŸ”„ Diagrama de Flujo del CRUD

## ğŸ¯ Arquitectura General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        NAVEGADOR                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   React App                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚        BrowserRouter (React Router)             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           AppRoutes                      â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ / â†’ UsersPage                        â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ /create â†’ UserFormPage               â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ /edit/:id â†’ UserFormPage             â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ /detail/:id â†’ UserDetailPage         â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚       QueryClientProvider                â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     Pages & Components              â”‚ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ UsersPage                      â”‚ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ UserFormPage                   â”‚ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ UserDetailPage                 â”‚ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ UserTable                      â”‚ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ UserForm                       â”‚ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ UserDetail                     â”‚ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ DeleteDialog                   â”‚ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Hooks
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CUSTOM HOOKS LAYER                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         React Query / TanStack Query                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ useUsers()        â†’ Listar usuarios              â”‚  â”‚
â”‚  â”‚  â”œâ”€ useUser(id)       â†’ Obtener usuario              â”‚  â”‚
â”‚  â”‚  â”œâ”€ useCreateUser()   â†’ Crear usuario                â”‚  â”‚
â”‚  â”‚  â”œâ”€ useUpdateUser()   â†’ Actualizar usuario           â”‚  â”‚
â”‚  â”‚  â””â”€ useDeleteUser()   â†’ Eliminar usuario             â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚      QueryClient Cache                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ queryKey: ['users']                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ queryKey: ['users', id]                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ Mutations tracking                         â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ API Calls
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API LAYER                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              userApi.ts (Mock)                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ getUsers()        â†’ GET /usuarios               â”‚  â”‚
â”‚  â”‚  â”œâ”€ getUserById(id)   â†’ GET /usuarios/{id}          â”‚  â”‚
â”‚  â”‚  â”œâ”€ createUser(data)  â†’ POST /usuarios              â”‚  â”‚
â”‚  â”‚  â”œâ”€ updateUser(id)    â†’ PUT /usuarios/{id}          â”‚  â”‚
â”‚  â”‚  â””â”€ deleteUser(id)    â†’ DELETE /usuarios/{id}       â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Simula latencia: 200-300ms                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Data
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA LAYER                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         In-Memory Mock Database                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ let users: User[] = [                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   { id: 1, nombre: 'Juan', ... },              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   { id: 2, nombre: 'MarÃ­a', ... },             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   { id: 3, nombre: 'Carlos', ... },            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   { id: 4, nombre: 'Ana', ... }                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ ];                                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Flujo de Datos por AcciÃ³n

### 1ï¸âƒ£ LISTAR USUARIOS

```
Usuario abre /
    â”‚
    â–¼
UsersPage se monta
    â”‚
    â–¼
useUsers() - React Query Hook
    â”‚
    â”œâ”€ Primer acceso?
    â”‚  â””â”€ No estÃ¡ en cache â†’ Fetch API
    â”‚  â””â”€ userApi.getUsers()
    â”‚  â””â”€ Simula 300ms
    â”‚  â””â”€ Retorna User[]
    â”‚
    â”œâ”€ Ya estÃ¡ en cache?
    â”‚  â””â”€ Retorna datos cacheados
    â”‚  â””â”€ Sin fetch
    â”‚
    â–¼
QueryClient actualiza cache
    â”‚
    â–¼
data = [ User[], User[], ... ]
isLoading = false
error = null
    â”‚
    â–¼
UsersPage se re-renderiza
    â”‚
    â–¼
UserTable renderiza la tabla
    â”‚
    â–¼
4 usuarios visibles en tabla âœ…
```

### 2ï¸âƒ£ CREAR USUARIO

```
Usuario hace click en "Nuevo Usuario"
    â”‚
    â–¼
navigate('/create')
    â”‚
    â–¼
UserFormPage se monta
    â”‚
    â–¼
UserForm se renderiza (vacÃ­o)
    â”‚
    â–¼
Usuario llena formulario
    â”‚
    â”œâ”€ Validaciones locales:
    â”‚  â”œâ”€ nombre no vacÃ­o?
    â”‚  â”œâ”€ grado no vacÃ­o?
    â”‚  â”œâ”€ edad > 0?
    â”‚  â””â”€ Si todo OK â†’ siguiente
    â”‚
    â–¼
onClick: handleSubmit(formData)
    â”‚
    â–¼
useCreateUser() - Mutation
    â”‚
    â–¼
mutateAsync(formData)
    â”‚
    â”œâ”€ isPending = true
    â”‚  â””â”€ BotÃ³n se deshabilita
    â”‚
    â–¼
userApi.createUser(data)
    â”‚
    â”œâ”€ Simula 300ms
    â”‚ â”œâ”€ Genera nuevo ID
    â”‚ â”œâ”€ Agrega a users[]
    â”‚ â””â”€ Retorna User creado
    â”‚
    â–¼
Mutation onSuccess callback
    â”‚
    â”œâ”€ queryClient.invalidateQueries(['users'])
    â”‚  â””â”€ Marca cache como stale
    â”‚
    â”œâ”€ Usuario aparece en cache
    â”‚
    â–¼
navigate('/')
    â”‚
    â–¼
UsersPage se monta
    â”‚
    â–¼
useUsers() ve cache marcado como stale
    â”‚
    â–¼
Fetch datos frescos
    â”‚
    â–¼
Tabla se actualiza con nuevo usuario âœ…
    â”‚
    â–¼
Sin recargar pÃ¡gina âœ¨
```

### 3ï¸âƒ£ EDITAR USUARIO

```
Usuario hace click en icono lÃ¡piz (ID: 1)
    â”‚
    â–¼
navigate('/edit/1')
    â”‚
    â–¼
UserFormPage se monta con id=1
    â”‚
    â–¼
useUser(1) carga datos
    â”‚
    â”œâ”€ Â¿EstÃ¡ en cache?
    â”‚  â””â”€ Retorna inmediatamente
    â”‚  â””â”€ Sin spinne
    â”‚
    â”‚ Â¿No estÃ¡ en cache?
    â”‚  â””â”€ userApi.getUserById(1)
    â”‚  â””â”€ isLoading = true
    â”‚  â””â”€ Spinner aparece
    â”‚
    â–¼
UserForm se renderiza (pre-lleno)
    â”‚
    â”œâ”€ nombre: "Juan PÃ©rez"
    â”œâ”€ grado: "10Â°"
    â””â”€ edad: 15
    â”‚
    â–¼
Usuario modifica datos
    â”‚
    â”œâ”€ nombre: "Juan PÃ©rez Actualizado"
    â”œâ”€ grado: "11Â°"
    â””â”€ edad: 16
    â”‚
    â–¼
onClick: handleSubmit(data)
    â”‚
    â–¼
useUpdateUser() - Mutation
    â”‚
    â–¼
mutateAsync({ id: 1, data })
    â”‚
    â”œâ”€ isPending = true
    â”‚
    â–¼
userApi.updateUser(1, data)
    â”‚
    â”œâ”€ Simula 300ms
    â”‚ â”œâ”€ Encuentra usuario con ID 1
    â”‚ â”œâ”€ Actualiza propiedades
    â”‚ â””â”€ Retorna User actualizado
    â”‚
    â–¼
Mutation onSuccess callback
    â”‚
    â”œâ”€ queryClient.invalidateQueries(['users'])
    â”œâ”€ queryClient.setQueryData(['users', 1], updatedUser)
    â”‚
    â–¼
navigate('/')
    â”‚
    â–¼
Tabla se re-renderiza
    â”‚
    â–¼
Usuario 1 mostrado con datos nuevos âœ…
    â”‚
    â–¼
Sin recargar pÃ¡gina âœ¨
```

### 4ï¸âƒ£ VER DETALLES

```
Usuario hace click en icono ojo (ID: 2)
    â”‚
    â–¼
navigate('/detail/2')
    â”‚
    â–¼
UserDetailPage se monta con id=2
    â”‚
    â–¼
useUser(2) carga datos
    â”‚
    â”œâ”€ Â¿EstÃ¡ en cache?
    â”‚  â””â”€ Usa datos del cache
    â”‚
    â”‚ Â¿No estÃ¡ en cache?
    â”‚  â””â”€ Fetch userApi.getUserById(2)
    â”‚
    â–¼
UserDetail renderiza
    â”‚
    â”œâ”€ ID: 2
    â”œâ”€ Nombre: MarÃ­a GarcÃ­a
    â”œâ”€ Grado: 11Â°
    â””â”€ Edad: 16 aÃ±os
    â”‚
    â–¼
Usuario ve detalles âœ…
    â”‚
    â–¼
Click "Volver"
    â”‚
    â–¼
navigate('/')
    â”‚
    â–¼
Vuelve a UsersPage
```

### 5ï¸âƒ£ ELIMINAR USUARIO

```
Usuario hace click en icono papelera (ID: 3)
    â”‚
    â–¼
setSelectedUserId(3)
setDeleteDialogOpen(true)
    â”‚
    â–¼
DeleteDialog se abre
    â”‚
    â”œâ”€ TÃ­tulo: "Confirmar eliminaciÃ³n"
    â”œâ”€ Mensaje: "Â¿EstÃ¡ seguro que desea eliminar este usuario?"
    â”œâ”€ BotÃ³n "Cancelar"
    â””â”€ BotÃ³n "Eliminar"
    â”‚
    â–¼
OpciÃ³n A: CANCELAR
    â”‚
    â”œâ”€ Click Cancelar
    â”œâ”€ Dialog se cierra
    â”œâ”€ Nada cambia
    â””â”€ Vuelve a tabla âœ…
    â”‚
    â–¼ O
    â”‚
    OpciÃ³n B: CONFIRMAR
    â”‚
    â”œâ”€ Click Eliminar
    â”‚
    â”œâ”€ useDeleteUser() - Mutation
    â”‚
    â”œâ”€ mutateAsync(3)
    â”‚  â”œâ”€ isPending = true
    â”‚  â”œâ”€ BotÃ³n se deshabilita
    â”‚
    â”œâ”€ userApi.deleteUser(3)
    â”‚  â”œâ”€ Simula 300ms
    â”‚  â”œâ”€ Encuentra usuario ID 3
    â”‚  â”œâ”€ Lo elimina de users[]
    â”‚
    â”œâ”€ Mutation onSuccess
    â”‚  â”œâ”€ queryClient.setQueryData(['users'], oldData =>
    â”‚  â”‚     oldData.filter(u => u.id !== 3)
    â”‚  â”‚  )
    â”‚  â”œâ”€ Cache se actualiza sin user ID 3
    â”‚
    â”œâ”€ Dialog se cierra
    â”‚
    â–¼
Tabla se re-renderiza
    â”‚
    â–¼
Usuario ID 3 ha desaparecido âœ…
    â”‚
    â–¼
Sin recargar pÃ¡gina âœ¨
```

---

## ğŸ”„ Ciclo de Vida de un Componente

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Usuario Accede a Ruta           â”‚
â”‚  (ej: navigate('/edit/1'))          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Componente Page se Monta        â”‚
â”‚  (ej: UserFormPage)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Custom Hooks se Ejecutan        â”‚
â”‚  useUser(id) â†’ QueryClient          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€ Â¿Dato en cache?
             â”‚  â””â”€ Retorna inmediatamente
             â”‚
             â”‚ Â¿Dato stale?
             â”‚  â””â”€ Refetch en background
             â”‚
             â”‚ Â¿Dato no existe?
             â”‚  â””â”€ API fetch
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   QueryClient Management            â”‚
â”‚  - Cache Key: ['users', 1]          â”‚
â”‚  - staleTime: 5 minutos             â”‚
â”‚  - gcTime: 10 minutos               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Componente Renderiza             â”‚
â”‚  (data, isLoading, error states)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€ isLoading=true
             â”‚  â””â”€ Spinner aparece
             â”‚
             â”œâ”€ isLoading=false
             â”‚  â””â”€ Datos se muestran
             â”‚
             â””â”€ error!=null
                â””â”€ Error aparece
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Usuario InteractÃºa              â”‚
â”‚  (click, submit, etc.)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Mutation se Ejecuta             â”‚
â”‚  useCreateUser/Update/Delete        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     API Call                        â”‚
â”‚  userApi.createUser/etc.            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Mutation Success/Error          â”‚
â”‚  onSuccess callback ejecuta         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€ invalidateQueries
             â”œâ”€ setQueryData
             â””â”€ navigate (si aplica)
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Componente Re-Renderiza            â”‚
â”‚  Con nuevos datos                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ Modelo de Datos

```typescript
// Flujo de tipos

User (en memoria)
â”œâ”€â”€ id: number
â”œâ”€â”€ nombre: string
â”œâ”€â”€ grado: string
â””â”€â”€ edad: number

    â†“

CreateUserDTO (formulario)
â”œâ”€â”€ nombre: string
â”œâ”€â”€ grado: string
â””â”€â”€ edad: number
    (sin id - se genera en API)

    â†“

UpdateUserDTO (ediciÃ³n)
â”œâ”€â”€ id: number
â””â”€â”€ CreateUserDTO (nombre, grado, edad)

    â†“

API Response
â””â”€â”€ User (completo con ID)

    â†“

Cache (React Query)
â”œâ”€â”€ queryKey: ['users']
â”‚   â””â”€â”€ User[]
â”œâ”€â”€ queryKey: ['users', 1]
â”‚   â””â”€â”€ User (especÃ­fico)
â””â”€â”€ Mutation state
    â”œâ”€â”€ isPending
    â”œâ”€â”€ error
    â””â”€â”€ data
```

---

## ğŸ”€ ConexiÃ³n de Componentes

```
App
â”œâ”€ BrowserRouter
â”‚  â””â”€ AppRoutes
â”‚     â”œâ”€ /
â”‚     â”‚  â””â”€ UsersPage
â”‚     â”‚     â””â”€ UserTable
â”‚     â”‚        â”œâ”€ (uses) useUsers()
â”‚     â”‚        â”œâ”€ (uses) useDeleteUser()
â”‚     â”‚        â””â”€ DeleteDialog
â”‚     â”‚
â”‚     â”œâ”€ /create
â”‚     â”‚  â””â”€ UserFormPage
â”‚     â”‚     â””â”€ UserForm
â”‚     â”‚        â””â”€ (uses) useCreateUser()
â”‚     â”‚
â”‚     â”œâ”€ /edit/:id
â”‚     â”‚  â””â”€ UserFormPage
â”‚     â”‚     â”œâ”€ UserForm
â”‚     â”‚     â”œâ”€ (uses) useUser(id)
â”‚     â”‚     â””â”€ (uses) useUpdateUser()
â”‚     â”‚
â”‚     â””â”€ /detail/:id
â”‚        â””â”€ UserDetailPage
â”‚           â””â”€ UserDetail
â”‚              â””â”€ (uses) useUser(id)
â”‚
â””â”€ QueryClientProvider
   â””â”€ QueryClient (cache y state)
```

---

**Este diagrama muestra cÃ³mo todos los componentes trabajan juntos para crear un CRUD completo y funcional.** ğŸ¯
